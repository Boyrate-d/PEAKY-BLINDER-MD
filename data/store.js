function _0x3a59(_0x4df134,_0x81efd5){const _0x4cf1d8=_0x4cf1();return _0x3a59=function(_0x3a5949,_0x161dc1){_0x3a5949=_0x3a5949-0xcf;let _0x6e8d87=_0x4cf1d8[_0x3a5949];return _0x6e8d87;},_0x3a59(_0x4df134,_0x81efd5);}const _0x53104f=_0x3a59;function _0x4cf1(){const _0x3c0fd9=['331083OXmjEf','89000FnMpTh','170cNoGSg','replace','sequelize','announce','message.json','map','all','parse','metadata.json','482400LWEucj','isCommunity','push','mkdir','store','length','contact.json','join','admin','fs/promises','utf8','descId','_participants.json','count','../lib/database','restrict','1215OhauJJ','name','linkedParent','jid','filter','find','message_count.json','subjectOwner','234221jEZqNM','ephemeralDuration','lastMessageTimestamp','writeFile','cwd','creation','@whiskeysockets/baileys','timestamp','desc','subjectTime','messageTimestamp','sort','joinApprovalMode','findIndex','participant','key','subject','toISOString','1532dNeMbd','groupMetadata','stringify','856094cRxERG','isCommunityAnnounce','1889678pcumTD','6wcBjHD','message','size','split','sender','readFile','participants'];_0x4cf1=function(){return _0x3c0fd9;};return _0x4cf1();}(function(_0x3f2bcd,_0x36c713){const _0x21d1b7=_0x3a59,_0x9f42d1=_0x3f2bcd();while(!![]){try{const _0x795a19=parseInt(_0x21d1b7(0xff))/0x1+parseInt(_0x21d1b7(0xd2))/0x2+-parseInt(_0x21d1b7(0xe7))/0x3+-parseInt(_0x21d1b7(0xcf))/0x4*(-parseInt(_0x21d1b7(0xf7))/0x5)+parseInt(_0x21d1b7(0xd5))/0x6*(parseInt(_0x21d1b7(0xd4))/0x7)+-parseInt(_0x21d1b7(0xdd))/0x8+-parseInt(_0x21d1b7(0xdc))/0x9*(parseInt(_0x21d1b7(0xde))/0xa);if(_0x795a19===_0x36c713)break;else _0x9f42d1['push'](_0x9f42d1['shift']());}catch(_0x1d6be1){_0x9f42d1['push'](_0x9f42d1['shift']());}}}(_0x4cf1,0x37a93));const {isJidBroadcast,isJidGroup,isJidNewsletter}=require(_0x53104f(0x105)),fs=require(_0x53104f(0xf0)),path=require('path'),{DataTypes}=require(_0x53104f(0xe0)),{DATABASE}=require(_0x53104f(0xf5)),storeDir=path[_0x53104f(0xee)](process[_0x53104f(0x103)](),_0x53104f(0xeb)),readJSON=async _0xa8108a=>{const _0x5418b3=_0x53104f;try{const _0x119965=path[_0x5418b3(0xee)](storeDir,_0xa8108a),_0x429128=await fs[_0x5418b3(0xda)](_0x119965,_0x5418b3(0xf1));return JSON[_0x5418b3(0xe5)](_0x429128);}catch{return[];}},writeJSON=async(_0x3d004b,_0x1aeaa)=>{const _0x254dfb=_0x53104f,_0x38d800=path['join'](storeDir,_0x3d004b);await fs[_0x254dfb(0xea)](storeDir,{'recursive':!![]}),await fs[_0x254dfb(0x102)](_0x38d800,JSON[_0x254dfb(0xd1)](_0x1aeaa,null,0x2));},saveContact=async(_0x4d0b0d,_0x1053a8)=>{const _0x1ce197=_0x53104f;if(!_0x4d0b0d||!_0x1053a8||isJidGroup(_0x4d0b0d)||isJidBroadcast(_0x4d0b0d)||isJidNewsletter(_0x4d0b0d))return;const _0xebf2cf=await readJSON(_0x1ce197(0xed)),_0x7b3385=_0xebf2cf[_0x1ce197(0x10c)](_0x3b8cf6=>_0x3b8cf6['jid']===_0x4d0b0d);_0x7b3385>-0x1?_0xebf2cf[_0x7b3385]['name']=_0x1053a8:_0xebf2cf[_0x1ce197(0xe9)]({'jid':_0x4d0b0d,'name':_0x1053a8}),await writeJSON(_0x1ce197(0xed),_0xebf2cf);},getContacts=async()=>{const _0x14f5f6=_0x53104f;try{const _0x1555b1=await readJSON(_0x14f5f6(0xed));return _0x1555b1;}catch(_0x584fd2){return[];}},saveMessage=async _0x4ec0d3=>{const _0x322b1e=_0x53104f,_0x2f3bf2=_0x4ec0d3[_0x322b1e(0x10e)]['remoteJid'],_0x1bf3d8=_0x4ec0d3[_0x322b1e(0x10e)]['id'];if(!_0x1bf3d8||!_0x2f3bf2||!_0x4ec0d3)return;await saveContact(_0x4ec0d3[_0x322b1e(0xd9)],_0x4ec0d3['pushName']);const _0x315890=await readJSON(_0x322b1e(0xe2)),_0x3e4e4e=_0x315890[_0x322b1e(0x10c)](_0x391a68=>_0x391a68['id']===_0x1bf3d8&&_0x391a68[_0x322b1e(0xfa)]===_0x2f3bf2),_0x7ebe80=_0x4ec0d3['messageTimestamp']?_0x4ec0d3[_0x322b1e(0x109)]*0x3e8:Date['now']();_0x3e4e4e>-0x1?(_0x315890[_0x3e4e4e][_0x322b1e(0xd6)]=_0x4ec0d3,_0x315890[_0x3e4e4e][_0x322b1e(0x106)]=_0x7ebe80):_0x315890[_0x322b1e(0xe9)]({'id':_0x1bf3d8,'jid':_0x2f3bf2,'message':_0x4ec0d3,'timestamp':_0x7ebe80}),await writeJSON(_0x322b1e(0xe2),_0x315890);},loadMessage=async _0x1a3342=>{const _0x5204df=_0x53104f;if(!_0x1a3342)return null;const _0x22c305=await readJSON(_0x5204df(0xe2));return _0x22c305[_0x5204df(0xfc)](_0x3e03b1=>_0x3e03b1['id']===_0x1a3342)||null;},getName=async _0x662927=>{const _0x4cf37f=_0x53104f,_0x3d408b=await readJSON(_0x4cf37f(0xed)),_0x5acc25=_0x3d408b['find'](_0x45cda4=>_0x45cda4[_0x4cf37f(0xfa)]===_0x662927);return _0x5acc25?_0x5acc25[_0x4cf37f(0xf8)]:_0x662927[_0x4cf37f(0xd8)]('@')[0x0][_0x4cf37f(0xdf)](/_/g,'\x20');},saveGroupMetadata=async(_0x3f1bf2,_0x2e7c77)=>{const _0x3f7057=_0x53104f;if(!isJidGroup(_0x3f1bf2))return;const _0x365287=await _0x2e7c77[_0x3f7057(0xd0)](_0x3f1bf2),_0x5a8ab2={'jid':_0x365287['id'],'subject':_0x365287[_0x3f7057(0x10f)],'subjectOwner':_0x365287[_0x3f7057(0xfe)],'subjectTime':_0x365287[_0x3f7057(0x108)]?new Date(_0x365287[_0x3f7057(0x108)]*0x3e8)['toISOString']():null,'size':_0x365287[_0x3f7057(0xd7)],'creation':_0x365287[_0x3f7057(0x104)]?new Date(_0x365287[_0x3f7057(0x104)]*0x3e8)[_0x3f7057(0x110)]():null,'owner':_0x365287['owner'],'desc':_0x365287[_0x3f7057(0x107)],'descId':_0x365287[_0x3f7057(0xf2)],'linkedParent':_0x365287[_0x3f7057(0xf9)],'restrict':_0x365287[_0x3f7057(0xf6)],'announce':_0x365287[_0x3f7057(0xe1)],'isCommunity':_0x365287[_0x3f7057(0xe8)],'isCommunityAnnounce':_0x365287[_0x3f7057(0xd3)],'joinApprovalMode':_0x365287[_0x3f7057(0x10b)],'memberAddMode':_0x365287['memberAddMode'],'ephemeralDuration':_0x365287[_0x3f7057(0x100)]},_0x43c91e=await readJSON('metadata.json'),_0x3a2b28=_0x43c91e['findIndex'](_0x20077a=>_0x20077a[_0x3f7057(0xfa)]===_0x3f1bf2);_0x3a2b28>-0x1?_0x43c91e[_0x3a2b28]=_0x5a8ab2:_0x43c91e[_0x3f7057(0xe9)](_0x5a8ab2);await writeJSON(_0x3f7057(0xe6),_0x43c91e);const _0x8233eb=_0x365287['participants'][_0x3f7057(0xe3)](_0x356e84=>({'jid':_0x3f1bf2,'participantId':_0x356e84['id'],'admin':_0x356e84[_0x3f7057(0xef)]}));await writeJSON(_0x3f1bf2+'_participants.json',_0x8233eb);},getGroupMetadata=async _0x22c785=>{const _0x1c7a5f=_0x53104f;if(!isJidGroup(_0x22c785))return null;const _0x172dba=await readJSON(_0x1c7a5f(0xe6)),_0x2c1bf5=_0x172dba[_0x1c7a5f(0xfc)](_0x522775=>_0x522775[_0x1c7a5f(0xfa)]===_0x22c785);if(!_0x2c1bf5)return null;const _0x129dd8=await readJSON(_0x22c785+_0x1c7a5f(0xf3));return{..._0x2c1bf5,'participants':_0x129dd8};},saveMessageCount=async _0x509cd8=>{const _0x546dd2=_0x53104f;if(!_0x509cd8)return;const _0x2ee174=_0x509cd8[_0x546dd2(0x10e)]['remoteJid'],_0x3fd5cc=_0x509cd8['key'][_0x546dd2(0x10d)]||_0x509cd8[_0x546dd2(0xd9)];if(!_0x2ee174||!_0x3fd5cc||!isJidGroup(_0x2ee174))return;const _0x40b96e=await readJSON(_0x546dd2(0xfd)),_0x962e3d=_0x40b96e['findIndex'](_0x51ff55=>_0x51ff55[_0x546dd2(0xfa)]===_0x2ee174&&_0x51ff55['sender']===_0x3fd5cc);_0x962e3d>-0x1?_0x40b96e[_0x962e3d][_0x546dd2(0xf4)]+=0x1:_0x40b96e[_0x546dd2(0xe9)]({'jid':_0x2ee174,'sender':_0x3fd5cc,'count':0x1}),await writeJSON(_0x546dd2(0xfd),_0x40b96e);},getInactiveGroupMembers=async _0x3bdc1d=>{const _0x21097e=_0x53104f;if(!isJidGroup(_0x3bdc1d))return[];const _0x416af0=await getGroupMetadata(_0x3bdc1d);if(!_0x416af0)return[];const _0x29caaa=await readJSON(_0x21097e(0xfd)),_0x5cb8c8=_0x416af0[_0x21097e(0xdb)][_0x21097e(0xfb)](_0x202b7d=>{const _0x508055=_0x21097e,_0x419a29=_0x29caaa[_0x508055(0xfc)](_0x33fbf2=>_0x33fbf2[_0x508055(0xfa)]===_0x3bdc1d&&_0x33fbf2[_0x508055(0xd9)]===_0x202b7d['id']);return!_0x419a29||_0x419a29['count']===0x0;});return _0x5cb8c8[_0x21097e(0xe3)](_0x465e29=>_0x465e29['id']);},getGroupMembersMessageCount=async _0x2fcceb=>{const _0x528a5f=_0x53104f;if(!isJidGroup(_0x2fcceb))return[];const _0x5a7e4b=await readJSON(_0x528a5f(0xfd)),_0x5ae26e=_0x5a7e4b[_0x528a5f(0xfb)](_0x475f95=>_0x475f95[_0x528a5f(0xfa)]===_0x2fcceb&&_0x475f95['count']>0x0)[_0x528a5f(0x10a)]((_0x54c0ac,_0x1f2f8b)=>_0x1f2f8b[_0x528a5f(0xf4)]-_0x54c0ac[_0x528a5f(0xf4)]);return Promise[_0x528a5f(0xe4)](_0x5ae26e['map'](async _0x10d8e0=>({'sender':_0x10d8e0[_0x528a5f(0xd9)],'name':await getName(_0x10d8e0[_0x528a5f(0xd9)]),'messageCount':_0x10d8e0[_0x528a5f(0xf4)]})));},getChatSummary=async()=>{const _0x3a2c19=_0x53104f,_0x2078d6=await readJSON(_0x3a2c19(0xe2)),_0x188971=[...new Set(_0x2078d6[_0x3a2c19(0xe3)](_0x38be25=>_0x38be25['jid']))],_0x5411f3=await Promise[_0x3a2c19(0xe4)](_0x188971[_0x3a2c19(0xe3)](async _0x3a3896=>{const _0x3aafb9=_0x3a2c19,_0x2192f8=_0x2078d6[_0x3aafb9(0xfb)](_0x2c94f6=>_0x2c94f6['jid']===_0x3a3896),_0x5237e3=_0x2192f8[_0x3aafb9(0xec)],_0x282f5e=_0x2192f8['sort']((_0x308555,_0x12fe81)=>new Date(_0x12fe81[_0x3aafb9(0x106)])-new Date(_0x308555[_0x3aafb9(0x106)]))[0x0],_0x921383=isJidGroup(_0x3a3896)?_0x3a3896:await getName(_0x3a3896);return{'jid':_0x3a3896,'name':_0x921383,'messageCount':_0x5237e3,'lastMessageTimestamp':_0x282f5e?_0x282f5e[_0x3aafb9(0x106)]:null};}));return _0x5411f3[_0x3a2c19(0x10a)]((_0x3494a1,_0x3809b3)=>new Date(_0x3809b3['lastMessageTimestamp'])-new Date(_0x3494a1[_0x3a2c19(0x101)]));},saveMessageV1=saveMessage,saveMessageV2=_0x5d601=>{return Promise['all']([saveMessageV1(_0x5d601),saveMessageCount(_0x5d601)]);};module['exports']={'saveContact':saveContact,'loadMessage':loadMessage,'getName':getName,'getChatSummary':getChatSummary,'saveGroupMetadata':saveGroupMetadata,'getGroupMetadata':getGroupMetadata,'saveMessageCount':saveMessageCount,'getInactiveGroupMembers':getInactiveGroupMembers,'getGroupMembersMessageCount':getGroupMembersMessageCount,'saveMessage':saveMessageV2};